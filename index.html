<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>canvas Simple Drawing</title>

	<link rel="stylesheet" href="style.css">
    <script src="drawing.js"></script>
</head>
<body>
    <div id="wrapper">
        <h1>canvas Simple Drawing</h1>
        <a href="gallery.php">Gallery</a>

        <input type="text" id="title_area">
        <div id="resize_area">
            <input type="number" id="input_width" value="500">x<input type="number" id="input_height" value="400">
            <button id="resize_canvas">Resize</button>
        </div>

        <canvas id="draw_canvas"></canvas>

        <div id="controls">
            <input type="color" id="color_picker">
            <input type="range" id="line_width" min="1" max="20" step="1" value="3">
            <output id="line_indicator">3</output>
            <button id="submit">Submit picture</button>
            <button id="clear">Clear picture</button>
        </div>
    </div>

    <script>
        var canvas,
            $$ = function(id) { return document.getElementById(id); },
            bind = function(elm, ev, func) { elm.addEventListener(ev, func, false); };

        var generateCanvas = function() {
            var width = $$('input_width').value;
            var height = $$('input_height').value;
            var cv = new DrawCanvas('draw_canvas', width, height); 

            cv.context.lineWidth = $$('line_width').value;
            cv.context.strokeStyle = $$('color_picker').value;

            return cv;
        };
        canvas = generateCanvas();

        bind($$('line_width'), 'change', function(ev) {
            var val = ev.target.value;
            canvas.context.lineWidth = val;
            $$('line_indicator').innerText = val;
        });

        bind($$('color_picker'), 'change', function(ev) {
            var val = ev.target.value;
            canvas.context.strokeStyle = val;
        });

        bind($$('resize_canvas'), 'click', function(ev) {
            canvas = generateCanvas();
        });

        bind($$('submit'), 'click', function(ev) {
            var title = $$('title_area').value;
            canvas.submitImg('receive.php', {title: title});
        });

        bind($$('clear'), 'click', function(ev) {
            canvas.initialize();
        });

    </script>
</body>
</html>

